<h1>Teams Admin</h1>

<h2>{{ teams.team1.name }}: {{ teams.team1.score }}</h2>
<button onclick="updateName('team1')">Change Team 1 Name</button>
<button onclick="updateScore('team1', 'inc')">+1</button>
<button onclick="updateScore('team1', 'dec')">-1</button>

<h2>{{ teams.team2.name }}: {{ teams.team2.score }}</h2>
<button onclick="updateName('team2')">Change Team 2 Name</button>
<button onclick="updateScore('team2', 'inc')">+1</button>
<button onclick="updateScore('team2', 'dec')">-1</button>

<br><br>
<button onclick="resetScore()">Reset</button>

<script>
function updateName(team) {
    let newName = prompt("Enter new name:");
    if(newName){
        fetch(`/teams/update_name/${team}/`, {
            method: "POST",
            headers: {"X-CSRFToken": "{{ csrf_token }}"},
            body: new URLSearchParams({name: newName})
        }).then(r => r.json()).then(data => location.reload());
    }
}

function updateScore(team, action) {
    fetch(`/teams/update_score/${team}/${action}/`)
        .then(r => r.json()).then(data => location.reload());
}

function resetScore() {
    fetch(`/teams/reset_score/`)
        .then(r => r.json()).then(data => location.reload());
}
</script>
