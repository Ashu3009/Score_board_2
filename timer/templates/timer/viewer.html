<!DOCTYPE html>
<html>
<head>
  <title>Viewer Timer</title>
</head>
<body>
  <h1>Countdown</h1>
  <h2><span id="timer">03:00</span></h2>

  <script>
    function formatTime(seconds) {
      let m = Math.floor(seconds / 60);
      let s = seconds % 60;
      return `${m.toString().padStart(2,'0')}:${s.toString().padStart(2,'0')}`;
    }

    function updateTimer() {
      fetch("/timer/get_timer/")
        .then(res => res.json())
        .then(data => {
          document.getElementById("timer").innerText = formatTime(data.time);
        });
    }

    setInterval(updateTimer, 1000);
  </script>
</body>
</html>
