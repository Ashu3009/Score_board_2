<!DOCTYPE html>
<html>
<head>
  <title>Viewer - Test 3</title>
</head>
<body>
  <h1>Live Scoreboard</h1>
  <h2>Main Timer: <span id="main_timer">03:00</span></h2>
  <h2>Penalty Timer: <span id="penalty_timer">00:00</span></h2>
  <h2>Red: <span id="score_red">0</span></h2>
  <h2>Blue: <span id="score_blue">0</span></h2>
  <h2>Round: <span id="round">1</span></h2>

  <script>
    function formatTime(sec){
      let m = Math.floor(sec/60);
      let s = sec%60;
      return `${m.toString().padStart(2,'0')}:${s.toString().padStart(2,'0')}`;
    }

    function update(){
      fetch("/test_3/get_timer/")
        .then(res=>res.json())
        .then(data=>{
          document.getElementById("main_timer").innerText = formatTime(data.main_timer);
          document.getElementById("penalty_timer").innerText = formatTime(data.penalty_timer);
          document.getElementById("score_red").innerText = data.team_red_score;
          document.getElementById("score_blue").innerText = data.team_blue_score;
          document.getElementById("round").innerText = data.round;
        });
    }

    setInterval(update,1000);
  </script>
</body>
</html>
