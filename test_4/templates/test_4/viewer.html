<!DOCTYPE html>
<html>
<head>
  <title>Viewer - Test 4</title>
  <style>
    body { font-family: Arial; text-align: center; background: #222; color: white; }
    .scoreboard { background: #333; padding: 20px; margin: 20px auto; width: 500px; border-radius: 10px; box-shadow: 0 4px 15px rgba(0,0,0,0.5); }
    h2 { margin: 10px; }
  </style>
</head>
<body>
  <div class="scoreboard">
    <h1>Live Scoreboard</h1>
    <h2>Game Timer: <span id="main_timer">03:00</span></h2>
    <h2>Penalty Timer: <span id="penalty_timer">00:00</span></h2>
    <h2 id="score_red">Red: 0</h2>
    <h2 id="score_blue">Blue: 0</h2>
    <h2>Round: <span id="round">1</span></h2>
  </div>

<script>
function formatTime(sec){
  let m = Math.floor(sec/60);
  let s = sec%60;
  return `${m.toString().padStart(2,'0')}:${s.toString().padStart(2,'0')}`;
}

function update(){
  fetch("/test_4/get_timer/")
    .then(res=>res.json())
    .then(data=>{
      document.getElementById("main_timer").innerText = formatTime(data.main_timer);
      document.getElementById("penalty_timer").innerText = formatTime(data.penalty_timer);
      document.getElementById("score_red").innerText = `${data.team_red_name}: ${data.team_red_score}`;
      document.getElementById("score_blue").innerText = `${data.team_blue_name}: ${data.team_blue_score}`;
      document.getElementById("round").innerText = data.round;
    });
}

setInterval(update,1000);
</script>
</body>
</html>
